# タイムカプセルアプリ　リカプセル

![リカプセル](https://user-images.githubusercontent.com/38308823/197376552-5165c5fa-607f-4721-be2f-d2746d244ac0.jpg)

<details>
 <summary>デモ動画（タイムカプセルを埋める）</summary>
 <video src="https://user-images.githubusercontent.com/38308823/197378769-dd2dbf70-7cc4-4ee4-86d6-24b04112d47a.mov">
</details>


<details>
 <summary>デモ動画（タイムカプセルを開ける）</summary>
 <video src="https://user-images.githubusercontent.com/38308823/197378769-dd2dbf70-7cc4-4ee4-86d6-24b04112d47a.mov">
</details>


## 製品概要

### 背景(製品開発のきっかけ、課題等）

私たちの日常には、些細だけれど、でも思い返すと大切な思い出がたくさんあります。そして、そんな思い出のある場所は、他の人にとっては何の変哲もない場所であったとしても、自分にとっては特別な場所になり得ます。

しかし、日常の中にある思い出は、全てを覚えておくことはできません。時間の経過とともに忘れてしまうことの方が多いです。そして、そんな思い出を一緒に作ったはずの友達もまた、ライフステージや環境の変化で離れてしまっていることが場合があります。

タイムカプセルアプリ「**リカプセル**」は **記憶 x Tech** サービスです。 日々の中にある素敵な記憶を思い出させると同時に、一度は失われてしまったコミュニケーションのきっかけを提供します。

### 製品説明（具体的な製品の説明）

サービスの流れは大きく３ステップ。

1. 埋める

   友達と一緒に、その日の思い出を写真とともに埋めることができます。

   - 代表者が、カプセルの色とその日の思い出を表す絵文字を 1 文字選ぶ
   - 一緒に埋める友達を招待して、一緒に制作
   - お互いに知られないように写真を登録
   - カプセルのタイトルや開ける日、メモを記録

![create-flow](https://user-images.githubusercontent.com/38308823/197377456-165f150e-2788-42d8-bc8f-e660b70d7ec9.jpg)


2. 待つ

   地図上で、どこの思い出がいつ開けられるかを見ることができます。

3. 掘り起こす

   みんなで集まってタイムカプセルを開封しましょう！

   - AR 上でカプセルを探索
   - 発見
   - スマホを振ってカプセルを開封
   - みんなの入れた写真やメモを見ることができる


![open-flow](https://user-images.githubusercontent.com/38308823/197377474-4ff21eab-cacc-4e95-9797-3ed882563c5c.jpg)

### こだわり

#### 単なるデジタル化ではない
- GPS、AR、加速度センサなどを最大限利用し、デジタルらしい「楽しさ」を演出しました

#### バーチャルとリアルの良いとこどり
- 「その場にいる人でないと参加できない」「実際にみんなで訪れないと開けれない」など、本来のタイムカプセルの持つアナログな楽しさを残しながら、地図表示や開封時間の可視化、ARなどデジタルならではの特徴を取り入れました。

#### 実装面、デザイン面の両面からユーザー体験を追求
- UIデザインはもちろん、カプセル開封時の動画や、カプセルの3Dモデルなどを自作。デザインと実装の両面からより良いプロダクトを目指しました。


### 特長

1. その場にいるメンバーみんなで参加できる
    - その日その場所にいたメンバーみんなが、一つのタイムカプセルに思い出を残すことができます。

2. お互いが入れた写真は開封までわからない
    - みんながどんな写真を入れたのかは開封までのお楽しみです。

3. みんなで集まるきっかけに
    - みんなが集まらないと開けることができません。
    - 一度は離れてしまった友達と、再びコミュニケーションを取るきっかけとなります。

### 解決出来ること

- 思い出、特に日常の些細な出来事を忘れてしまう
  - タイムカプセルの存在、そしてその中に入れられたたくさんの写真が、時間の経過とともに忘れてしまった素敵な日常の思い出を思い出させます
- 学校の卒業など、ライフステージの変化で友達と会わなくなってしまう
  - 「タイムカプセル開けようよ！」が、旧友と再びコミュニケーションを取るきっかけになります

### 今後の展望

- カプセルが開けられるようになった際の通知
- AR 画面における 3D モデルのブラッシュアップ
- カプセルを埋める・掘り起こす際に動画を撮れるようにする
- シェア機能

# 開発技術

## 活用した技術

### API・データ

- MapQuest
- MapBox
- 国土交通省地理院地図

### フレームワーク・ライブラリ・モジュール
- React
- Next.js
- tailwind
- Mantine
- Three.js
- Firebase

## 技術的工夫点
_全てのコードはハッカソン期間中に書いています(事前開発は行っていません)_

### Location-based ARを独自実装
  - 端末のGPS情報や位置情報をもとにカプセルの表示場所を計算し、カメラ映像に重ねる形でThree.jsで描画 ([実装](https://github.com/jphacks/F_2207/blob/main/src/pages/cupsel/open/%5BcapsuleId%5D/index.tsx))

<img src="https://user-images.githubusercontent.com/38308823/197379813-40c33292-1025-4851-ab4e-40976ef5db16.png" width="300px"/>

  
### GPSを利用して、近くにいる友達へタイムカプセルの作成を自動通知する
  - 友達を選択するなどの面倒な手順を踏むことなく、ワンタップで参加可能 ([実装](https://github.com/jphacks/F_2207/blob/fe13b963dec81b4cb7e1bda45501a26c9aa00dc6/src/view/MatchingDialog.tsx#L29-L31))
  - 友達の入力内容をリアルタイム同期

https://user-images.githubusercontent.com/38308823/197379547-97cf8b5a-4d79-461f-b828-2260ab2439aa.mov
  
### 加速度情報を利用した「スマホを振る」機能
  - 端末の加速度センサを利用し、「スマホを振るとタイムカプセルが開く」アクションを実現 ([実装](https://github.com/jphacks/F_2207/blob/main/src/lib/useShakeAmount.ts))
  
<img src="https://user-images.githubusercontent.com/38308823/197379721-972fe555-7ae5-4feb-9cfb-3667fec07d34.png" width="300px"/>

### 3Dモデル、アニメーション動画を作成

  - カプセルに思い出が詰まっている様子を3Dモデルで表現しています

https://user-images.githubusercontent.com/38308823/197379901-0bc25a59-b791-4db7-9688-d106b9005977.mp4
